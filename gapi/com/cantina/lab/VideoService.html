<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- **************************************************************** -->
<!-- *  PLEASE KEEP COMPLICATED EXPRESSIONS OUT OF THESE TEMPLATES, * -->
<!-- *  i.e. only iterate & print data where possible. Thanks, Jez. * -->
<!-- **************************************************************** -->

<html>
<head>
<!-- Generated by groovydoc (1.8.6) on Mon Mar 18 12:30:18 MST 2013 -->
<title>VideoService (Groovy Documentation)</title>
<meta name="date" content="2013-03-18">
<link href="../../../groovy.ico" type="image/x-icon" rel="shortcut icon">
<link href="../../../groovy.ico" type="image/x-icon" rel="icon">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<script type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="VideoService (Groovy Documentation)";
    }
}
</script>
<noscript>
</noscript>

</head><body onload="windowTitle();" bgcolor="white">
<hr>

<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>

  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <!--<TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  -->
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
<b>Groovy Documentation</b>
</EM></TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><!--<FONT SIZE="-2">
&nbsp;<A HREF="../../../groovy/lang/ExpandoMetaClass.ExpandoMetaProperty.html" title="class in groovy.lang"><B>PREV CLASS</B></A>&nbsp;

&nbsp;<A HREF="../../../groovy/lang/GroovyClassLoader.html" title="class in groovy.lang"><B>NEXT CLASS</B></A></FONT>--></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html?com/cantina/lab/VideoService.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="VideoService.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<script type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../allclasses-frame.html"><B>All Classes</B></A>');
  }
  //-->
</script>
<noscript>
  <A HREF="../../../allclasses-frame.html"><B>All Classes</B></A>
</noscript>

</FONT></TD>

</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
SUMMARY:&nbsp;<A HREF="#nested_summary">NESTED</A>&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#property_summary">PROPERTY</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#prop_detail">PROPERTY</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<!-- ========= END OF TOP NAVBAR ========= -->


<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>

<FONT SIZE="-1">
com.cantina.lab</FONT>
<BR>

<span CLASS="ClassTitleFont">[Groovy] Class VideoService</span></H2>
<pre>java.lang.Object
  <img src='../../../inherit.gif'>com.cantina.lab.VideoService
</pre><dl><dt><b>All Implemented Interfaces:</b> </dt><dd>org.springframework.beans.factory.InitializingBean</dd></dl><hr>
<PRE>class VideoService

</PRE>

<P>
 Manages Movies.
 <DL><DT><B>Authors:</B></DT><DD>Matt Chisholm</DD><DD>Adam Stachelek</DD><DD>Ryan Vanderwerf</DD><DD>Peter N. Steinmetz</DD></DL>
</P>
<hr>


<!-- =========== NESTED CLASS SUMMARY =========== -->

<A NAME="nested_summary"><!-- --></A>

    <TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
    <TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
    <TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
    <B>Nested Class Summary</B></FONT></TH>
    </TR>
    
        <TR BGCOLOR="white" CLASS="TableRowColor">
        <TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
        <CODE>private&nbsp;static&nbsp;class</CODE></FONT></TD>
        <TD>
            <CODE><a href='../../../com/cantina/lab/VideoService.Range.html'>VideoService.Range</a></CODE>
            <BR>
            <P>Range of content to serve.</P>
        </TD>
        </TR>
    
    </TABLE>
    &nbsp;


<!-- =========== ENUM CONSTANT SUMMARY =========== -->

<A NAME="enum_constant_summary"><!-- --></A>


<!-- =========== FIELD SUMMARY =========== -->

<A NAME="field_summary"><!-- --></A>

    <TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
    <TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
    <TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
    <B>Field Summary</B></FONT></TH>
    </TR>
    
        <TR BGCOLOR="white" CLASS="TableRowColor">
        <TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
        <CODE>private&nbsp;java.lang.Object</CODE></FONT></TD>
        <TD>
            <CODE><B><A HREF="#mvals">mvals</A></B></CODE>
            <BR>
            <P></P>
        </TD>
        </TR>
    
    </TABLE>
    &nbsp;


<!-- =========== PROPERTY SUMMARY =========== -->

<A NAME="property_summary"><!-- --></A>

    <TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
    <TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
    <TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
    <B>Property Summary</B></FONT></TH>
    </TR>
    
        <TR BGCOLOR="white" CLASS="TableRowColor">
        <TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
        <CODE>java.lang.Object</CODE></FONT></TD>
        <TD>
            <CODE><B><A HREF="#grailsApplication">grailsApplication</A></B></CODE>
            <BR>
            <P></P>
        </TD>
        </TR>
    
        <TR BGCOLOR="white" CLASS="TableRowColor">
        <TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
        <CODE>static&nbsp;java.lang.String</CODE></FONT></TD>
        <TD>
            <CODE><B><A HREF="#mimeSeparation">mimeSeparation</A></B></CODE>
            <BR>
            <P></P>
        </TD>
        </TR>
    
        <TR BGCOLOR="white" CLASS="TableRowColor">
        <TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
        <CODE>static&nbsp;int</CODE></FONT></TD>
        <TD>
            <CODE><B><A HREF="#responseBufferSize">responseBufferSize</A></B></CODE>
            <BR>
            <P></P>
        </TD>
        </TR>
    
        <TR BGCOLOR="white" CLASS="TableRowColor">
        <TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
        <CODE>static&nbsp;java.lang.Object</CODE></FONT></TD>
        <TD>
            <CODE><B><A HREF="#transactional">transactional</A></B></CODE>
            <BR>
            <P></P>
        </TD>
        </TR>
    
        <TR BGCOLOR="white" CLASS="TableRowColor">
        <TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
        <CODE>static&nbsp;int</CODE></FONT></TD>
        <TD>
            <CODE><B><A HREF="#transferBufferSize">transferBufferSize</A></B></CODE>
            <BR>
            <P></P>
        </TD>
        </TR>
    
        <TR BGCOLOR="white" CLASS="TableRowColor">
        <TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
        <CODE>java.lang.Object</CODE></FONT></TD>
        <TD>
            <CODE><B><A HREF="#videoConversionService">videoConversionService</A></B></CODE>
            <BR>
            <P></P>
        </TD>
        </TR>
    
    </TABLE>
    &nbsp;


<!-- =========== ELEMENT SUMMARY =========== -->



<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>

    <TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
    <TR BGCOLOR="#D5D5FF" CLASS="TableHeadingColor">
    <TD COLSPAN=2><FONT SIZE="+2">
    <B>Constructor Summary</B></FONT></TD>
    </TR>
    
        <TR BGCOLOR="white" CLASS="TableRowColor">
        <TD>
            <CODE><B><a href="#VideoService()">VideoService</a></B>()</CODE>
            <BR>
            <P></P>
        </TD>
        </TR>
    
    </TABLE>
    &nbsp;


<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>

    <TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
    <TR CLASS="TableHeadingColor">
    <TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2" CLASS="ClassHeadingFont">
    <B>Method Summary</B></FONT></TH>
    </TR>
    
        <TR BGCOLOR="white" CLASS="TableRowColor">
        <TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1" CLASS="ClassItemFont">
            <CODE>void</CODE></FONT>
        </TD>
        <TD>
            <CODE><b><a href="#afterPropertiesSet()">afterPropertiesSet</a></b>()</CODE>
            <BR>
            <P>Update configuration settings and rebuild storage path, if needed.</P>
        </TD>
        </TR>
    
        <TR BGCOLOR="white" CLASS="TableRowColor">
        <TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1" CLASS="ClassItemFont">
            <CODE>private&nbsp;void</CODE></FONT>
        </TD>
        <TD>
            <CODE><b><a href="#buildLocalPath()">buildLocalPath</a></b>()</CODE>
            <BR>
            <P>Construct local file storage if doesn't exist,
 as configured by the video.location variable.</P>
        </TD>
        </TR>
    
        <TR BGCOLOR="white" CLASS="TableRowColor">
        <TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1" CLASS="ClassItemFont">
            <CODE>void</CODE></FONT>
        </TD>
        <TD>
            <CODE><b><a href="#convertNewVideo()">convertNewVideo</a></b>()</CODE>
            <BR>
            <P>Convert all movies whose status is 'new'.</P>
        </TD>
        </TR>
    
        <TR BGCOLOR="white" CLASS="TableRowColor">
        <TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1" CLASS="ClassItemFont">
            <CODE>void</CODE></FONT>
        </TD>
        <TD>
            <CODE><b><a href="#convertVideo(com.cantina.lab.Movie)">convertVideo</a></b>(<a href='../../../com/cantina/lab/Movie.html'>Movie</a> movie)</CODE>
            <BR>
            <P>Convert Movie to format specified by the video.ffmpeg.fileExtension variable.</P>
        </TD>
        </TR>
    
        <TR BGCOLOR="white" CLASS="TableRowColor">
        <TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1" CLASS="ClassItemFont">
            <CODE>protected&nbsp;void</CODE></FONT>
        </TD>
        <TD>
            <CODE><b><a href="#copy(java.io.InputStream, javax.servlet.ServletOutputStream, java.util.Iterator, java.lang.String)">copy</a></b>(java.io.InputStream istream, javax.servlet.ServletOutputStream ostream, java.util.Iterator ranges, java.lang.String contentType)</CODE>
            <BR>
            <P>Copy ranges of content of the specified input stream to the specified
 output stream, and ensure that the input stream is closed before returning
 (even in the face of an exception).</P>
        </TD>
        </TR>
    
        <TR BGCOLOR="white" CLASS="TableRowColor">
        <TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1" CLASS="ClassItemFont">
            <CODE>protected&nbsp;void</CODE></FONT>
        </TD>
        <TD>
            <CODE><b><a href="#copy(java.io.InputStream, javax.servlet.ServletOutputStream, com.cantina.lab.VideoService.Range)">copy</a></b>(java.io.InputStream istream, javax.servlet.ServletOutputStream ostream, <a href='../../../com/cantina/lab/VideoService.Range.html'>VideoService.Range</a> range)</CODE>
            <BR>
            <P>Copy a range of content of the specified input stream to the specified
 output stream, and ensure that the input stream is closed before returning
 (even in the face of an exception).</P>
        </TD>
        </TR>
    
        <TR BGCOLOR="white" CLASS="TableRowColor">
        <TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1" CLASS="ClassItemFont">
            <CODE>private&nbsp;java.io.IOException</CODE></FONT>
        </TD>
        <TD>
            <CODE><b><a href="#copyRange(java.io.InputStream, javax.servlet.ServletOutputStream, long, long)">copyRange</a></b>(java.io.InputStream istream, javax.servlet.ServletOutputStream ostream, long start, long end)</CODE>
            <BR>
            <P>Copy a range of contents of the specified input stream to the specified
 output stream.</P>
        </TD>
        </TR>
    
        <TR BGCOLOR="white" CLASS="TableRowColor">
        <TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1" CLASS="ClassItemFont">
            <CODE>private&nbsp;void</CODE></FONT>
        </TD>
        <TD>
            <CODE><b><a href="#delete(java.lang.String)">delete</a></b>(java.lang.String path)</CODE>
            <BR>
            <P>Delete a file at a path, working even if file doesn't exist.</P>
        </TD>
        </TR>
    
        <TR BGCOLOR="white" CLASS="TableRowColor">
        <TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1" CLASS="ClassItemFont">
            <CODE>void</CODE></FONT>
        </TD>
        <TD>
            <CODE><b><a href="#deleteConversionProducts(com.cantina.lab.Movie)">deleteConversionProducts</a></b>(<a href='../../../com/cantina/lab/Movie.html'>Movie</a> movie)</CODE>
            <BR>
            <P>Delete video products of conversion.</P>
        </TD>
        </TR>
    
        <TR BGCOLOR="white" CLASS="TableRowColor">
        <TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1" CLASS="ClassItemFont">
            <CODE>void</CODE></FONT>
        </TD>
        <TD>
            <CODE><b><a href="#deleteMovie(com.cantina.lab.Movie)">deleteMovie</a></b>(<a href='../../../com/cantina/lab/Movie.html'>Movie</a> movie)</CODE>
            <BR>
            <P>Delete movie from database and storage files.</P>
        </TD>
        </TR>
    
        <TR BGCOLOR="white" CLASS="TableRowColor">
        <TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1" CLASS="ClassItemFont">
            <CODE>private&nbsp;void</CODE></FONT>
        </TD>
        <TD>
            <CODE><b><a href="#fillPlayTime(com.cantina.lab.Movie)">fillPlayTime</a></b>(<a href='../../../com/cantina/lab/Movie.html'>Movie</a> movie)</CODE>
            <BR>
            <P>Fill in playTime from converted video.</P>
        </TD>
        </TR>
    
        <TR BGCOLOR="white" CLASS="TableRowColor">
        <TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1" CLASS="ClassItemFont">
            <CODE>private&nbsp;void</CODE></FONT>
        </TD>
        <TD>
            <CODE><b><a href="#fillSizeTypeDateUrl(com.cantina.lab.Movie)">fillSizeTypeDateUrl</a></b>(<a href='../../../com/cantina/lab/Movie.html'>Movie</a> movie)</CODE>
            <BR>
            <P>Fill in size, type, date and url for a Movie.</P>
        </TD>
        </TR>
    
        <TR BGCOLOR="white" CLASS="TableRowColor">
        <TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1" CLASS="ClassItemFont">
            <CODE><a href='../../../com/cantina/lab/VideoType.html'>VideoType</a></CODE></FONT>
        </TD>
        <TD>
            <CODE><b><a href="#getConversionVideoType()">getConversionVideoType</a></b>()</CODE>
            <BR>
            <P>Get VideoType that we are converting to based on configuration.</P>
        </TD>
        </TR>
    
        <TR BGCOLOR="white" CLASS="TableRowColor">
        <TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1" CLASS="ClassItemFont">
            <CODE><a href='../../../com/cantina/lab/Movie.html'>Movie</a></CODE></FONT>
        </TD>
        <TD>
            <CODE><b><a href="#importConvertedVideo(java.io.File)">importConvertedVideo</a></b>(java.io.File convertedVideoFile)</CODE>
            <BR>
            <P>Import a pre-converted video into the system, creating a Movie object.</P>
        </TD>
        </TR>
    
        <TR BGCOLOR="white" CLASS="TableRowColor">
        <TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1" CLASS="ClassItemFont">
            <CODE>private&nbsp;void</CODE></FONT>
        </TD>
        <TD>
            <CODE><b><a href="#logRequest(javax.servlet.http.HttpServletRequest)">logRequest</a></b>(javax.servlet.http.HttpServletRequest request)</CODE>
            <BR>
            <P>Log contents of the request at debug level.</P>
        </TD>
        </TR>
    
        <TR BGCOLOR="white" CLASS="TableRowColor">
        <TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1" CLASS="ClassItemFont">
            <CODE>private&nbsp;java.util.List</CODE></FONT>
        </TD>
        <TD>
            <CODE><b><a href="#parseRange(javax.servlet.http.HttpServletRequest, javax.servlet.http.HttpServletResponse, java.io.File)">parseRange</a></b>(javax.servlet.http.HttpServletRequest request, javax.servlet.http.HttpServletResponse response, java.io.File myFile)</CODE>
            <BR>
            <P>Parse the range header.</P>
        </TD>
        </TR>
    
        <TR BGCOLOR="white" CLASS="TableRowColor">
        <TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1" CLASS="ClassItemFont">
            <CODE>void</CODE></FONT>
        </TD>
        <TD>
            <CODE><b><a href="#putMovie(com.cantina.lab.Movie)">putMovie</a></b>(<a href='../../../com/cantina/lab/Movie.html'>Movie</a> movie)</CODE>
            <BR>
            <P>Save movie into database, marking as needing conversion.</P>
        </TD>
        </TR>
    
        <TR BGCOLOR="white" CLASS="TableRowColor">
        <TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1" CLASS="ClassItemFont">
            <CODE>private&nbsp;void</CODE></FONT>
        </TD>
        <TD>
            <CODE><b><a href="#setupConversionPaths(com.cantina.lab.Movie)">setupConversionPaths</a></b>(<a href='../../../com/cantina/lab/Movie.html'>Movie</a> mov)</CODE>
            <BR>
            <P>Setup paths for conversion from Movie.pathMaster</P>
        </TD>
        </TR>
    
        <TR BGCOLOR="white" CLASS="TableRowColor">
        <TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1" CLASS="ClassItemFont">
            <CODE>void</CODE></FONT>
        </TD>
        <TD>
            <CODE><b><a href="#streamFlv(java.util.Map, javax.servlet.http.HttpServletRequest, javax.servlet.http.HttpServletResponse, com.cantina.lab.Movie)">streamFlv</a></b>(java.util.Map params, javax.servlet.http.HttpServletRequest request, javax.servlet.http.HttpServletResponse response, <a href='../../../com/cantina/lab/Movie.html'>Movie</a> movie)</CODE>
            <BR>
            <P>Stream contents of a Movie as an flv file.</P>
        </TD>
        </TR>
    
        <TR BGCOLOR="white" CLASS="TableRowColor">
        <TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1" CLASS="ClassItemFont">
            <CODE>void</CODE></FONT>
        </TD>
        <TD>
            <CODE><b><a href="#streamMp4(java.util.Map, javax.servlet.http.HttpServletRequest, javax.servlet.http.HttpServletResponse, com.cantina.lab.Movie)">streamMp4</a></b>(java.util.Map params, javax.servlet.http.HttpServletRequest request, javax.servlet.http.HttpServletResponse response, <a href='../../../com/cantina/lab/Movie.html'>Movie</a> movie)</CODE>
            <BR>
            <P>Stream contents of a Movie as a mp4 file.</P>
        </TD>
        </TR>
    
    </TABLE>
    &nbsp;
<table BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
                <tr CLASS="TableSubHeadingColor"><th ALIGN="left" COLSPAN="2">
                <b>Methods inherited from class java.lang.Object</b>
                </th></tr>
                <tr class="TableRowColor"><td colspan='2'>java.lang.Object#wait(), java.lang.Object#wait(long), java.lang.Object#wait(long, int), java.lang.Object#equals(java.lang.Object), java.lang.Object#toString(), java.lang.Object#hashCode(), java.lang.Object#getClass(), java.lang.Object#notify(), java.lang.Object#notifyAll()</td></tr>
                </table>
                &nbsp;

<P>

<!-- ============ ENUM CONSTANT DETAIL ========== -->

<A NAME="enum_constant_detail"><!-- --></A>


<!-- =========== FIELD DETAIL =========== -->

<A NAME="field_detail"><!-- --></A>

    <TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
    <TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
    <TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
    <B>Field Detail</B></FONT></TH>
    </TR>
    </TABLE>
    
        <A NAME="mvals"><!-- --></A><H3>mvals</H3>
        <PRE>private&nbsp;java.lang.Object <B>mvals</B></PRE>
        <DL>
        <DD>
        </DD>
        <P>
        </DL>
        <HR>
    
    &nbsp;


<!-- =========== PROPERTY DETAIL =========== -->

<A NAME="prop_detail"><!-- --></A>

    <TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
    <TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
    <TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
    <B>Property Detail</B></FONT></TH>
    </TR>
    </TABLE>
    
        <A NAME="grailsApplication"><!-- --></A><H3>grailsApplication</H3>
        <PRE>java.lang.Object <B>grailsApplication</B></PRE>
        <DL>
        <DD>
        </DD>
        <P>
        </DL>
        <HR>
    
        <A NAME="mimeSeparation"><!-- --></A><H3>mimeSeparation</H3>
        <PRE>static&nbsp;java.lang.String <B>mimeSeparation</B></PRE>
        <DL>
        <DD>
        </DD>
        <P>
        </DL>
        <HR>
    
        <A NAME="responseBufferSize"><!-- --></A><H3>responseBufferSize</H3>
        <PRE>static&nbsp;int <B>responseBufferSize</B></PRE>
        <DL>
        <DD>
        </DD>
        <P>
        </DL>
        <HR>
    
        <A NAME="transactional"><!-- --></A><H3>transactional</H3>
        <PRE>static&nbsp;java.lang.Object <B>transactional</B></PRE>
        <DL>
        <DD>
        </DD>
        <P>
        </DL>
        <HR>
    
        <A NAME="transferBufferSize"><!-- --></A><H3>transferBufferSize</H3>
        <PRE>static&nbsp;int <B>transferBufferSize</B></PRE>
        <DL>
        <DD>
        </DD>
        <P>
        </DL>
        <HR>
    
        <A NAME="videoConversionService"><!-- --></A><H3>videoConversionService</H3>
        <PRE>java.lang.Object <B>videoConversionService</B></PRE>
        <DL>
        <DD>
        </DD>
        <P>
        </DL>
        <HR>
    
    &nbsp;


<!-- =========== ELEMENT DETAIL =========== -->

<A NAME="element_detail"><!-- --></A>


<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>

    <TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
    <TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
    <TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
    <B>Constructor Detail</B></FONT></TH>
    </TR>
    </TABLE>
    
        <A NAME="VideoService()"><!-- --></A><H3>
        VideoService</H3>
        <PRE><B>VideoService</B>()</PRE>
        <DL>
        <DD>
        </DD>
        <P>
        </DL>
        <HR>
    
    &nbsp;


<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>

    <TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
    <TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
    <TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
    <B>Method Detail</B></FONT></TH>
    </TR>
    </TABLE>
    
        <A NAME="afterPropertiesSet()"><!-- --></A><H3>
        afterPropertiesSet</H3>
        <PRE>void <B>afterPropertiesSet</B>()</PRE>
        <DL>
        <DD> Update configuration settings and rebuild storage path, if needed.
	 
        </DD>
        <P>
        </DL>
        <HR>
    
        <A NAME="buildLocalPath()"><!-- --></A><H3>
        buildLocalPath</H3>
        <PRE>private&nbsp;void <B>buildLocalPath</B>()</PRE>
        <DL>
        <DD> Construct local file storage if doesn't exist,
 as configured by the video.location variable.
	 
        </DD>
        <P>
        </DL>
        <HR>
    
        <A NAME="convertNewVideo()"><!-- --></A><H3>
        convertNewVideo</H3>
        <PRE>void <B>convertNewVideo</B>()</PRE>
        <DL>
        <DD> Convert all movies whose status is 'new'.
	 
        </DD>
        <P>
        </DL>
        <HR>
    
        <A NAME="convertVideo(com.cantina.lab.Movie)"><!-- --></A><H3>
        convertVideo</H3>
        <PRE>void <B>convertVideo</B>(<a href='../../../com/cantina/lab/Movie.html'>Movie</a> movie)</PRE>
        <DL>
        <DD> Convert Movie to format specified by the video.ffmpeg.fileExtension variable.
	 <DL><DT><B>Parameters:</B></DT><DD><code>Movie</code> -  to convert, assumed to have valid pathMaster field.</DD></DL>
        </DD>
        <P>
        </DL>
        <HR>
    
        <A NAME="copy(java.io.InputStream, javax.servlet.ServletOutputStream, java.util.Iterator, java.lang.String)"><!-- --></A><H3>
        copy</H3>
        <PRE>protected&nbsp;void <B>copy</B>(java.io.InputStream istream, javax.servlet.ServletOutputStream ostream, java.util.Iterator ranges, java.lang.String contentType)</PRE>
        <DL>
        <DD> Copy ranges of content of the specified input stream to the specified
 output stream, and ensure that the input stream is closed before returning
 (even in the face of an exception).<DL><DT><B>throws:</B></DT><DD>IOException if an input/output error occurs</DD></DL>
     <DL><DT><B>Parameters:</B></DT><DD><code>istream</code> -  InputStream to read data from</DD><DD><code>ostream</code> -  ServletOutputStream to write to</DD><DD><code>ranges</code> -  Enumeration of the ranges the client wanted to retrieve</DD><DD><code>contentType</code> -  Content type of the resource</DD></DL>
        </DD>
        <P>
        </DL>
        <HR>
    
        <A NAME="copy(java.io.InputStream, javax.servlet.ServletOutputStream, com.cantina.lab.VideoService.Range)"><!-- --></A><H3>
        copy</H3>
        <PRE>protected&nbsp;void <B>copy</B>(java.io.InputStream istream, javax.servlet.ServletOutputStream ostream, <a href='../../../com/cantina/lab/VideoService.Range.html'>VideoService.Range</a> range)</PRE>
        <DL>
        <DD> Copy a range of content of the specified input stream to the specified
 output stream, and ensure that the input stream is closed before returning
 (even in the face of an exception).<DL><DT><B>throws:</B></DT><DD>IOException if an input/output error occurs</DD></DL>
     <DL><DT><B>Parameters:</B></DT><DD><code>instream</code> -  InputStream to read from</DD><DD><code>ostream</code> -  ServletOutputStream to write to</DD><DD><code>range</code> -  Range the client wanted to retrieve</DD></DL>
        </DD>
        <P>
        </DL>
        <HR>
    
        <A NAME="copyRange(java.io.InputStream, javax.servlet.ServletOutputStream, long, long)"><!-- --></A><H3>
        copyRange</H3>
        <PRE>private&nbsp;java.io.IOException <B>copyRange</B>(java.io.InputStream istream, javax.servlet.ServletOutputStream ostream, long start, long end)</PRE>
        <DL>
        <DD> Copy a range of contents of the specified input stream to the specified
 output stream.
     <DL><DT><B>Parameters:</B></DT><DD><code>istream</code> -  The input stream to read from</DD><DD><code>ostream</code> -  The output stream to write to</DD><DD><code>start</code> -  Start of the range which will be copied</DD><DD><code>end</code> -  End of the range which will be copied</DD></DL><DL><DT><B>Returns:</B></DT><DD>Exception which occurred during processing or null if none encountered</DD></DL>
        </DD>
        <P>
        </DL>
        <HR>
    
        <A NAME="delete(java.lang.String)"><!-- --></A><H3>
        delete</H3>
        <PRE>private&nbsp;void <B>delete</B>(java.lang.String path)</PRE>
        <DL>
        <DD> Delete a file at a path, working even if file doesn't exist.
	 <DL><DT><B>Parameters:</B></DT><DD><code>path</code> -  to delete</DD></DL>
        </DD>
        <P>
        </DL>
        <HR>
    
        <A NAME="deleteConversionProducts(com.cantina.lab.Movie)"><!-- --></A><H3>
        deleteConversionProducts</H3>
        <PRE>void <B>deleteConversionProducts</B>(<a href='../../../com/cantina/lab/Movie.html'>Movie</a> movie)</PRE>
        <DL>
        <DD> Delete video products of conversion.
	 
        </DD>
        <P>
        </DL>
        <HR>
    
        <A NAME="deleteMovie(com.cantina.lab.Movie)"><!-- --></A><H3>
        deleteMovie</H3>
        <PRE>void <B>deleteMovie</B>(<a href='../../../com/cantina/lab/Movie.html'>Movie</a> movie)</PRE>
        <DL>
        <DD> Delete movie from database and storage files.
	 <DL><DT><B>Parameters:</B></DT><DD><code>movie</code> -  to delete</DD></DL>
        </DD>
        <P>
        </DL>
        <HR>
    
        <A NAME="fillPlayTime(com.cantina.lab.Movie)"><!-- --></A><H3>
        fillPlayTime</H3>
        <PRE>private&nbsp;void <B>fillPlayTime</B>(<a href='../../../com/cantina/lab/Movie.html'>Movie</a> movie)</PRE>
        <DL>
        <DD> Fill in playTime from converted video.
	 <DL><DT><B>Parameters:</B></DT><DD><code>movie</code> -  to fill playTime in.</DD></DL>
        </DD>
        <P>
        </DL>
        <HR>
    
        <A NAME="fillSizeTypeDateUrl(com.cantina.lab.Movie)"><!-- --></A><H3>
        fillSizeTypeDateUrl</H3>
        <PRE>private&nbsp;void <B>fillSizeTypeDateUrl</B>(<a href='../../../com/cantina/lab/Movie.html'>Movie</a> movie)</PRE>
        <DL>
        <DD> Fill in size, type, date and url for a Movie.
	 
        </DD>
        <P>
        </DL>
        <HR>
    
        <A NAME="getConversionVideoType()"><!-- --></A><H3>
        getConversionVideoType</H3>
        <PRE><a href='../../../com/cantina/lab/VideoType.html'>VideoType</a> <B>getConversionVideoType</B>()</PRE>
        <DL>
        <DD> Get VideoType that we are converting to based on configuration.
	 
        </DD>
        <P>
        </DL>
        <HR>
    
        <A NAME="importConvertedVideo(java.io.File)"><!-- --></A><H3>
        importConvertedVideo</H3>
        <PRE><a href='../../../com/cantina/lab/Movie.html'>Movie</a> <B>importConvertedVideo</B>(java.io.File convertedVideoFile)</PRE>
        <DL>
        <DD> Import a pre-converted video into the system, creating a Movie object.
 
 Moves the file, creates a thumbnail, and updates the database.
	 <DL><DT><B>Returns:</B></DT><DD>Movie object</DD></DL>
        </DD>
        <P>
        </DL>
        <HR>
    
        <A NAME="logRequest(javax.servlet.http.HttpServletRequest)"><!-- --></A><H3>
        logRequest</H3>
        <PRE>private&nbsp;void <B>logRequest</B>(javax.servlet.http.HttpServletRequest request)</PRE>
        <DL>
        <DD> Log contents of the request at debug level.
     
        </DD>
        <P>
        </DL>
        <HR>
    
        <A NAME="parseRange(javax.servlet.http.HttpServletRequest, javax.servlet.http.HttpServletResponse, java.io.File)"><!-- --></A><H3>
        parseRange</H3>
        <PRE>private&nbsp;java.util.List <B>parseRange</B>(javax.servlet.http.HttpServletRequest request, javax.servlet.http.HttpServletResponse response, java.io.File myFile)</PRE>
        <DL>
        <DD> Parse the range header.
     <DL><DT><B>Parameters:</B></DT><DD><code>request</code> -  The servlet request we are processing</DD><DD><code>response</code> -  The servlet response we are creating</DD></DL><DL><DT><B>Returns:</B></DT><DD>Vector of ranges</DD></DL>
        </DD>
        <P>
        </DL>
        <HR>
    
        <A NAME="putMovie(com.cantina.lab.Movie)"><!-- --></A><H3>
        putMovie</H3>
        <PRE>void <B>putMovie</B>(<a href='../../../com/cantina/lab/Movie.html'>Movie</a> movie)</PRE>
        <DL>
        <DD> Save movie into database, marking as needing conversion.
	 <DL><DT><B>Parameters:</B></DT><DD><code>movie</code> -  to store</DD></DL>
        </DD>
        <P>
        </DL>
        <HR>
    
        <A NAME="setupConversionPaths(com.cantina.lab.Movie)"><!-- --></A><H3>
        setupConversionPaths</H3>
        <PRE>private&nbsp;void <B>setupConversionPaths</B>(<a href='../../../com/cantina/lab/Movie.html'>Movie</a> mov)</PRE>
        <DL>
        <DD> Setup paths for conversion from Movie.pathMaster
	 <DL><DT><B>Parameters:</B></DT><DD><code>mov</code> -  Movie to set conversions paths for</DD></DL>
        </DD>
        <P>
        </DL>
        <HR>
    
        <A NAME="streamFlv(java.util.Map, javax.servlet.http.HttpServletRequest, javax.servlet.http.HttpServletResponse, com.cantina.lab.Movie)"><!-- --></A><H3>
        streamFlv</H3>
        <PRE>void <B>streamFlv</B>(java.util.Map params, javax.servlet.http.HttpServletRequest request, javax.servlet.http.HttpServletResponse response, <a href='../../../com/cantina/lab/Movie.html'>Movie</a> movie)</PRE>
        <DL>
        <DD> Stream contents of a Movie as an flv file.
	 <DL><DT><B>Parameters:</B></DT><DD><code>params</code> -  which may contain pos or start attributes</DD><DD><code>request</code> -  servlet request</DD><DD><code>response</code> -  servlet response</DD><DD><code>movie</code> -  to stream</DD></DL>
        </DD>
        <P>
        </DL>
        <HR>
    
        <A NAME="streamMp4(java.util.Map, javax.servlet.http.HttpServletRequest, javax.servlet.http.HttpServletResponse, com.cantina.lab.Movie)"><!-- --></A><H3>
        streamMp4</H3>
        <PRE>void <B>streamMp4</B>(java.util.Map params, javax.servlet.http.HttpServletRequest request, javax.servlet.http.HttpServletResponse response, <a href='../../../com/cantina/lab/Movie.html'>Movie</a> movie)</PRE>
        <DL>
        <DD> Stream contents of a Movie as a mp4 file.
	 <DL><DT><B>Parameters:</B></DT><DD><code>params</code> -  which are unused</DD><DD><code>request</code> -  servlet request</DD><DD><code>response</code> -  servlet response</DD><DD><code>movie</code> -  to stream</DD></DL>
        </DD>
        <P>
        </DL>
        <HR>
    
    &nbsp;


<!-- ========= END OF CLASS DATA ========= -->
<p>Groovy Documentation</p>
<hr>

</body>
</html>
